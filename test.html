<!DOCTYPE html>
<html>

<head>
    <title>Coin Crush (Custom)</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }

        .input-group {
            margin: 15px 0;
        }

        input {
            padding: 10px;
            margin: 5px 0;
            width: 100%;
            box-sizing: border-box;
        }

        button {
            padding: 12px 20px;
            background: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            width: 100%;
            font-size: 16px;
        }

        button:hover {
            background: #45a049;
        }

        #result {
            font-size: 18px;
            margin: 20px 0;
            padding: 10px;
            background: #f8f8f8;
            border-radius: 5px;
        }

        #crash-chart {
            margin: 30px 0;
        }

        .flex-container {
            display: flex;
            gap: 10px;
        }

        .flex-container input {
            flex: 1;
        }
    </style>
</head>

<body>
    <h1>Coin Crush</h1>

    <div class="input-group">
        <label>–í–∞—à–∞ —Å—Ç–∞–≤–∫–∞:</label>
        <input type="number" id="bet-input" min="1" value="100" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É">
    </div>

    <div class="input-group">
        <label>–í—ã–±–µ—Ä–∏—Ç–µ Crush (–º–Ω–æ–∂–∏—Ç–µ–ª—å):</label>
        <div class="flex-container">
            <input type="number" id="crush-input" min="1.1" step="0.1" value="2.0" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 2.0">
            <button onclick="startGame()">–ò–≥—Ä–∞—Ç—å</button>
        </div>
    </div>

    <div id="result"></div>

    <canvas id="crash-chart"></canvas>

    <script>
        let chart;
        let animationInterval;
        let currentMultiplier = 1.0;
        let targetCrush = 0;
        let isGameRunning = false;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–∞
        function initChart() {
            const ctx = document.getElementById('crash-chart').getContext('2d');
            chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: '–¢–µ–∫—É—â–∏–π –º–Ω–æ–∂–∏—Ç–µ–ª—å',
                        data: [],
                        borderColor: '#4CAF50',
                        borderWidth: 3,
                        fill: false,
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: '–ú–Ω–æ–∂–∏—Ç–µ–ª—å' }
                        },
                        x: {
                            title: { display: true, text: '–í—Ä–µ–º—è' }
                        }
                    }
                }
            });
        }

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        function startGame() {
            if (isGameRunning) {
                alert("–î–æ–∂–¥–∏—Ç–µ—Å—å –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ç–µ–∫—É—â–µ–π –∏–≥—Ä—ã!");
                return;
            }

            const bet = parseFloat(document.getElementById('bet-input').value);
            targetCrush = parseFloat(document.getElementById('crush-input').value);

            if (!bet || bet < 1) {
                alert("–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—Ç–∞–≤–∫—É!");
                return;
            }

            if (!targetCrush || targetCrush < 1.1) {
                alert("Crush –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å ‚â• 1.1");
                return;
            }

            isGameRunning = true;
            currentMultiplier = 1.0;
            document.getElementById('result').textContent = "–ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å...";
            document.getElementById('crush-input').readOnly = true;

            // –û—á–∏—Å—Ç–∫–∞ –≥—Ä–∞—Ñ–∏–∫–∞
            chart.data.labels = [];
            chart.data.datasets[0].data = [];
            chart.update();

            // –ó–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–∏
            animationInterval = setInterval(updateMultiplier, 100);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–Ω–æ–∂–∏—Ç–µ–ª—è
        function updateMultiplier() {
            // –®–∞–Ω—Å –∫—Ä–∞—Ö–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è —Å —Ä–æ—Å—Ç–æ–º –º–Ω–æ–∂–∏—Ç–µ–ª—è
            const crashChance = 0.01 + (currentMultiplier * 0.005);

            if (Math.random() < crashChance) {
                endGame(false);
                return;
            }

            currentMultiplier += 0.05;

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞
            chart.data.labels.push(currentMultiplier.toFixed(2) + 'x');
            chart.data.datasets[0].data.push(currentMultiplier);
            chart.update();

            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–±–µ–¥–∞ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Ü–µ–ª–∏
            if (currentMultiplier >= targetCrush) {
                endGame(true);
            }
        }

        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã
        function endGame(isWin) {
            clearInterval(animationInterval);
            isGameRunning = false;
            document.getElementById('crush-input').readOnly = false;

            const bet = parseFloat(document.getElementById('bet-input').value);
            const winAmount = isWin ? (bet * targetCrush).toFixed(2) : 0;

            const resultText = isWin
                ? `üèÜ –ü–æ–±–µ–¥–∞! –ú–Ω–æ–∂–∏—Ç–µ–ª—å –¥–æ—Å—Ç–∏–≥ ${currentMultiplier.toFixed(2)}x (–≤–∞—à Crush: ${targetCrush}x). –í—ã–∏–≥—Ä—ã—à: ${winAmount}`
                : `üí• –ö—Ä–∞—Ö! –ú–Ω–æ–∂–∏—Ç–µ–ª—å —É–ø–∞–ª –Ω–∞ ${currentMultiplier.toFixed(2)}x (–Ω—É–∂–Ω–æ –±—ã–ª–æ ${targetCrush}x)`;

            document.getElementById('result').innerHTML = resultText;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = initChart;
    </script>
</body>

</html>